<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | HapiRESTServer</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
  <script src="script/matomo.js"></script>
<meta name="description" content="Template for Hapi Rest Server"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="HapiRESTServer"><meta property="twitter:description" content="Template for Hapi Rest Server"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <a href="swagger/index.html">API</a>
  <a id="healthcheck" href="">Healthcheck</a>

  <script>
    var el = document.getElementById('healthcheck')
    if (window.location.href.indexOf('github') == -1) {
      el.href = '../../admin/status';
    } else {
      el.style.color = 'grey';
      el.style.cursor = 'not-allowed';
      el.title = 'Unavailable on Github Hosting'
    }
  </script>
<a style="position:relative; top:3px;" href="https://github.com/devlinjunker/template.hapi.rest"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.setup.html"><a href="manual/README.setup.html" data-ice="link">Setup</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.setup.html"><a href="manual/README.setup.html#webpack" data-ice="link">Webpack</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.setup.html"><a href="manual/README.setup.html#documentation" data-ice="link">Documentation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.setup.html"><a href="manual/README.setup.html#notes-ideas" data-ice="link">Notes/Ideas</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.entry.html"><a href="manual/README.entry.html" data-ice="link">Application Entry Point</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.entry.html"><a href="manual/README.entry.html#notes-ideas" data-ice="link">Notes/Ideas</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.controllers.html"><a href="manual/README.controllers.html" data-ice="link">Controllers</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.controllers.html"><a href="manual/README.controllers.html#notes-ideas" data-ice="link">Notes/Ideas</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.dataservices.html"><a href="manual/README.dataservices.html" data-ice="link">Dataservices</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.dataservices.html"><a href="manual/README.dataservices.html#examples" data-ice="link">Examples</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.dataservices.html"><a href="manual/README.dataservices.html#note-dataservice" data-ice="link">Note Dataservice</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.dataservices.html"><a href="manual/README.dataservices.html#notes-ideas" data-ice="link">Notes/Ideas</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.helpers.html"><a href="manual/README.helpers.html" data-ice="link">Helpers</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.helpers.html"><a href="manual/README.helpers.html#examples" data-ice="link">Examples</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.helpers.html"><a href="manual/README.helpers.html#mariadb" data-ice="link">MariaDB</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.helpers.html"><a href="manual/README.helpers.html#config" data-ice="link">Config</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.helpers.html"><a href="manual/README.helpers.html#healthcheck" data-ice="link">Healthcheck</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.helpers.html"><a href="manual/README.helpers.html#notes-ideas" data-ice="link">Notes/Ideas</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.logging.html"><a href="manual/README.logging.html" data-ice="link">Logging</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.logging.html"><a href="manual/README.logging.html#configurations" data-ice="link">Configurations</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.logging.html"><a href="manual/README.logging.html#what-we-log" data-ice="link">What we log</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.logging.html"><a href="manual/README.logging.html#other-processes" data-ice="link">Other processes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.logging.html"><a href="manual/README.logging.html#logrotate" data-ice="link">Logrotate</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.logging.html"><a href="manual/README.logging.html#pino-pretty" data-ice="link">Pino-Pretty</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.logging.html"><a href="manual/README.logging.html#notes-ideas" data-ice="link">Notes/Ideas</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.scripts.html"><a href="manual/README.scripts.html" data-ice="link">Git Hooks/Workflow</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.scripts.html"><a href="manual/README.scripts.html#on-commit" data-ice="link">On commit</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.scripts.html"><a href="manual/README.scripts.html#github-actions" data-ice="link">Github Actions</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.scripts.html"><a href="manual/README.scripts.html#on-master-pr" data-ice="link">On Master PR</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/README.scripts.html"><a href="manual/README.scripts.html#on-merge-to-master" data-ice="link">On Merge to Master</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.test.html"><a href="manual/README.test.html" data-ice="link">Test</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/README.test.html"><a href="manual/README.test.html#notes-ideas" data-ice="link">Notes/Ideas</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown" data-ice="content"><h1 id="controllers">Controllers</h1><p>Controllers are functions that handle requests to specific endpoint paths:</p>
<pre><code><code class="source-code prettyprint">function controllerFunction(request) {
    ... do stuff and return a message ...
}</code>
</code></pre><p>The first parameter passed in is the <a href="https://github.com/hapijs/hapi/blob/master/API.md#request for HapiRequest">HapiRequest</a> object</p>
<p>We define the mapping from endpoint/method to controller function with an JSON object:</p>
<pre><code><code class="source-code prettyprint">const map1 = {
  path: &quot;/endpoint&quot;,
  method: &quot;GET&quot;, ///
  controller: controllerFunction
}</code>
</code></pre><p>To make this endpoint available to the server, we need to export an array of these mappings:</p>
<pre><code><code class="source-code prettyprint">export default [ map1, map2, ... ];</code>
</code></pre><h2 id="notes-ideas">Notes/Ideas</h2><ul>
<li>OPTIONS requests?</li>
<li>Do not instantiate classes to handle requests. This would be a huge memory overhead!<ul>
<li>From Walmart interview: class methods bad for memory as we don&apos;t want to instantiate a class in memory. Seems like that isn&apos;t true for static functions though... <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static</a></li>
<li>I prefer creating classes with <strong>static</strong>  methods for encapsulation for testing and documentation purposes</li>
</ul>
</li>
<li>DO NOT USE SHARED CLASS PROPERTIES/STATEFUL VARIABLES IN CONTROLLER FUNCTIONS<ul>
<li>These functions need to be stateless.</li>
</ul>
</li>
<li><strong>IDEA:</strong> Catch any exceptions that don&apos;t have response code and log or email indicating unexpected state</li>
<li><strong>IDEA:</strong> generic CRUD endpoints with a flexible storage system for prototypes<ul>
<li>/{objectType}/create</li>
<li>/{objectType}/read/{id}</li>
<li>/{objectType}/update/{id}</li>
<li>/{objectType}/delete/{id}</li>
<li>/{objectType}/all?filters?fields?</li>
<li>/{objectType}/search?q</li>
</ul>
</li>
</ul>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>

<script src="script/github-link.js"></script>

</body>
</html>
